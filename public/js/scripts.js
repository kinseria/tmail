!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=41)}({41:function(e,t,n){e.exports=n(42)},42:function(e,t){var n=localStorage.getItem("notificationMsgs")?JSON.parse(localStorage.getItem("notificationMsgs")):[],o=localStorage.getItem("mailboxMsgs")?JSON.parse(localStorage.getItem("mailboxMsgs")):[],i="",a=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}("server_error"),s=!!localStorage.getItem("cookie_shown");function c(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="expires="+o.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$(".refresh > span.icon > i").addClass("pause-spinner"),$.each(e,(function(e,n){if("length"==e)return!0;$("#mails").prepend('<div id="mail-'+e+'" class="mail-item"><div class="row sender-time"><div class="col-6 sender">'+n.sender_name+'</div><div class="col-6 time">'+n.short_time+'</div></div><div class="subject">'+n.subject+'</div><div class="message">'+n.text.substring(0,150)+"</div></div>"),$("#mails > div").length%4==0&&i.length>0&&$("#mails").prepend("<div class='mail-item'>"+i+"</div>"),n.html=n.html.replace("href","target='_blank' href");var o='<div id="content-mail-'+e+'" class="mail-content"><div class="close-mail-content"><i class="fas fa-angle-double-left"></i><span>View all mails</span></div><div class="subject">'+n.subject+'</div><div class="row sender-time"><div class="col-md-9 sender">'+n.sender_name+" - "+n.sender_email+'</div><div class="col-md-3 time">'+n.time+'</div></div><span class="mail-delete" uid="'+e+'"><i class="fas fa-trash-alt"></i></span><span class="mail-download" key="'+e+'" subject="'+n.subject.replace(/ /g,"_")+'"><i class="fas fa-save"></i></span><div class="message">'+n.html+'</div><div class="attachments">';$.each(n.attachments,(function(e,t){o+='<a href="'+t.path+'" download="" target="_blank"><i class="fas fa-paperclip"></i>'+t.name+"</a>"}));var a='<textarea class="d-none" id="download-'+e+'">To: '+$("#current-id").val()+'\nFrom: "'+n.sender_name+'" <'+n.sender_email+">\nSubject: "+n.subject+"\nDate: "+n.time+"\nContent-Type: text/html\n\n"+n.html+"</textarea>";o+="</div>",o+=a,o+="</div>",$("#tm-message").prepend(o),t&&r(n.subject,n.text.substring(0,50))}))}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={body:t,icon:"/images/icon.png"};if(e)if("granted"===Notification.permission){var o=new Notification(e,n);o.onclick=function(){window.focus()}}else"denied"!==Notification.permission&&Notification.requestPermission((function(t){"granted"===t&&(new Notification(e,n).onclick=function(){window.focus()})}))}$.ajax({url:"/ads/4",success:function(e){i=e}}),$(document).on("click",".mail-item",(function(){var e=$(this).attr("id");$("#tm-message > div").fadeOut(100),$(this).hasClass("active")?($(this).removeClass("active"),$("#tm-message > .no-mails").delay(100).fadeIn(100)):($(".mail-item").removeClass("active"),$(this).addClass("active"),$("#tm-message > .no-mails").fadeOut(100),0==$("#content-"+e+" .tm_ads").length&&($("#content-"+e).prepend("<div class='tm_ads'>"+$(".tm-message > span.ad_space_2")[0].innerHTML+"</div>"),$("#content-"+e).append("<div class='tm_ads'>"+$(".tm-message > span.ad_space_3")[0].innerHTML+"</div>")),$("#content-"+e).delay(100).fadeIn(100),$("html, body").animate({scrollTop:$("header").offset().top},500))})),$(document).on("keyup",'input[name="search"]',(function(){var e=this;mails=document.querySelectorAll(".mail-item"),mails.forEach((function(t){document.querySelector("#content-".concat(t.id)).innerText.toLowerCase().includes(e.value.toLowerCase())?(t.hidden=!1,t.classList.contains("active")&&(t.classList.remove("active"),document.querySelector("#content-".concat(t.id)).style.display="none",$("#tm-message > .no-mails").delay(100).fadeIn(100))):t.hidden=!0}))})),$(document).on("click",".tm-domain-selector",(function(){$(this).hasClass("open")?$(this).removeClass("open"):$(this).addClass("open")})),$(document).on("click",".domain-selector",(function(){var e=$(this).text();$("input[type='hidden'][name='domain']").val(e.replace("@","")),$("#selected-domain").html(e)})),$(document).on("click","#btn-new",(function(){$("#actions-flip > .front").slideUp(300,(function(){$("#actions-flip > .back").slideDown(300)}))})),$(document).on("click","#btn-cancel",(function(){$("#actions-flip > .back").slideUp(300,(function(){$("#actions-flip > .front").slideDown(300)}))})),$(document).on("click",".action-item",(function(){var e=$(this).attr("action");if("delete"==e)$.post("/mailbox/delete",{_token:$("#token").val()},(function(e,t){window.location.href=e?"/mailbox/"+e:"/"}));else if("copy"==e){var t=document.getElementById("current-id");if(navigator.userAgent.match(/ipad|iphone/i)){var o=t.contentEditable,i=t.readOnly;t.contentEditable=!0,t.readOnly=!1;var s=document.createRange();s.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(s),t.setSelectionRange(0,999999),t.contentEditable=o,t.readOnly=i}else t.select();document.execCommand("copy"),t.blur()}else if("refresh"==e){if($(".refresh > span.icon > i").hasClass("stop-spinner"))return!0;if($(".refresh > span.icon > i").hasClass("pause-spinner")){$(".refresh > span.icon > i").removeClass("pause-spinner");var d=null;d=$.ajax({url:"/mail/fetch?new=true",beforeSend:function(){null!=d&&d.abort()},success:function(e){e.length>0&&$("#mails > p").remove(),l(e,!0),c("server_error",!1,20),a=!1},error:function(e,t){c("server_error",!0,20),a||location.reload(),Swal.fire({type:t,title:"Oops...",text:n.error.common,confirmButtonText:n.button.reload,footer:'<a href="/faq">'+n.faq+"</a>",onClose:function(){location.reload()}}),$("#mails").html("<p>ERROR</p>"),$(".refresh > span.icon > i").addClass("pause-spinner"),$(".refresh > span.icon > i").addClass("stop-spinner")}})}}})),$(document).on("click",".close-mail-content",(function(){$(".mail-item").removeClass("active"),$(".mail-content").fadeOut(100)})),$(document).on("click",".snackbar",(function(){var e=$(this).attr("msg");$("#snackbar").html(e),$("#snackbar").addClass("show"),setTimeout((function(){$("#snackbar").removeClass("show")}),3e3)})),$(document).on("click","#toggle",(function(){$(this).toggleClass("active"),$("#overlay").toggleClass("open")})),$(document).on("click",".mail-download",(function(){var e=document.createElement("a");e.download=this.getAttribute("subject")+".eml",e.href=function(e){var t=null;text=document.getElementById("download-"+e).value;var n=new Blob([text],{type:"text/plain"});null!==t&&window.URL.revokeObjectURL(t);return t=window.URL.createObjectURL(n)}(this.getAttribute("key")),document.body.appendChild(e),e.click(),e.remove()})),$(document).on("click","#fetch",(function(){$.ajax({url:"/mail/fetch",success:function(e){e.length>0?($("#mails").html(""),l(e)):($(".refresh > span.icon > i").addClass("pause-spinner"),$("#mails").html("<p>"+o.nomails+"</p>"),setTimeout((function(){$("#mails").html("<p>"+o.emails+"</p>")}),3e3)),c("server_error",!1,20),a=!1},error:function(e,t){c("server_error",!0,20),a||location.reload(),Swal.fire({type:t,title:"Oops...",text:n.error.common,confirmButtonText:n.button.reload,footer:'<a href="/faq">'+n.faq+"</a>",onClose:function(){location.reload()}}),$("#mails").html("<p>ERROR</p>"),$(".refresh > span.icon > i").addClass("pause-spinner"),$(".refresh > span.icon > i").addClass("stop-spinner")}}),$("#fetch").remove()})),$(document).on("click",".mail-delete",(function(){var e=$(this).attr("uid");$("#mail-"+e).fadeOut(),$("#content-mail-"+e).fadeOut(),$("#tm-message > .no-mails").delay(100).fadeIn(100),$.post("/mail/delete",{_token:$("#token").val(),uid:e},(function(e,t){$("#mail-"+e).remove(),$("#content-mail-"+e).remove(),$("#mails").is(":empty")&&$("#mails").html("<p>"+o.emails+"</p>")})).fail((function(){Swal.fire({type:"error",title:"Oops...",text:n.error.delete,confirmButtonText:n.button.close,footer:'<a href="/faq">'+n.faq+"</a>"}),$("#mail-"+e).fadeIn(),$("#content-mail-"+e).fadeIn()}))})),$(document).on("change","#locale",(function(){var e=$(this).val();$.post("/locale",{_token:$("#token").val(),locale:e},(function(e,t){location.reload()})).fail((function(){Swal.fire({type:"error",title:"Oops...",text:n.error.common,confirmButtonText:n.button.reload,footer:'<a href="/faq">'+n.faq+"</a>"}),$("#mail-"+uid).fadeIn(),$("#content-mail-"+uid).fadeIn()}))})),$.isFunction($.fn.shortcode)&&$("body").shortcode({blogs:function(){var e='<div class="blogs row">',t=this.options.url+"/wp-json/wp/v2/posts?_fields[]=link&_fields[]=title&_fields[]=excerpt",n={context:this.options.context,page:this.options.page,per_page:this.options.per_page,search:this.options.search,after:this.options.after,author:this.options.author,author_exclude:this.options.author_exclude,before:this.options.before,exclude:this.options.exclude,include:this.options.include,offset:this.options.offset,order:this.options.order,orderby:this.options.orderby,slug:this.options.slug,status:this.options.status,categories:this.options.categories,categories_exclude:this.options.categories_exclude,tags:this.options.tags,tags_exclude:this.options.tags_exclude,sticky:this.options.sticky};Object.keys(n).forEach((function(e){n[e]&&(t+="&"+e+"="+n[e])}));var o=[];return $.ajax({url:t,success:function(e){o=e},error:function(){console.log("Error! Please contact admin")}}).then((function(){o.forEach((function(t){e+='<div class="blog-item col-md-4">',e+='<a href="'+t.link+'" target="_blank">',e+='<span class="title">'+t.title.rendered+"</span>",e+='<span class="excerpt">'+t.excerpt.rendered+"</span>",e+="</a>",e+="</div>"})),e+="</div>",o.length?$("#blogs").html(e):$("#blogs").html('<div class="no-content">204 - NO CONTENT AVAILABLE</div>')})),"<div id='blogs'><div class='content-loader'><i class='fas fa-sync fa-spin'></i></div>"}}),s&&document.querySelector(".cookie_policy")&&document.querySelector(".cookie_policy").classList.add("hide"),document.querySelector(".cookie_policy")&&document.querySelector(".cookie_policy_close").addEventListener("click",(function(){localStorage.setItem("cookie_shown",!0),document.querySelector(".cookie_policy").classList.add("hide")}))}});